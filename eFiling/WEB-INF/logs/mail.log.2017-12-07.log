[DEBUG][2017-12-06 10:53:45,765] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-06 10:53:45,775] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 10:53:45,781] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 10:53:45,798] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-06 10:53:45,798] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 10:53:45,800] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 11:16:51,891] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-06 11:16:51,902] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 11:16:51,910] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 11:16:51,933] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-06 11:16:51,933] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 11:16:51,933] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 11:58:06,458] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-06 11:58:06,467] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 11:58:06,476] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 11:58:06,498] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-06 11:58:06,498] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 11:58:06,499] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 12:36:49,516] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-06 12:36:49,524] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 12:36:49,531] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 12:36:49,553] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-06 12:36:49,554] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 12:36:49,554] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 13:54:29,264] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-06 13:54:29,273] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 13:54:29,281] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 13:54:29,306] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-06 13:54:29,306] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 13:54:29,307] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 14:34:00,702] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-06 14:34:00,710] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 14:34:00,717] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 14:34:00,734] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-06 14:34:00,734] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 14:34:00,735] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 14:53:21,183] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-06 14:53:21,242] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 14:53:21,249] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 14:53:21,271] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-06 14:53:21,271] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 14:53:21,272] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 15:16:12,049] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-06 15:16:12,057] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 15:16:12,064] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 15:16:12,085] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-06 15:16:12,085] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 15:16:12,086] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 15:28:34,195] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-06 15:28:34,396] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 15:28:34,405] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 15:28:34,423] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-06 15:28:34,425] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 15:28:34,425] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 15:38:52,908] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-06 15:38:52,917] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 15:38:52,924] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 15:38:52,945] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-06 15:38:52,945] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 15:38:52,946] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 15:49:18,970] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-06 15:49:18,981] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 15:49:18,989] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 15:49:19,011] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-06 15:49:19,012] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 15:49:19,012] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 15:58:01,663] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-06 15:58:01,672] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 15:58:01,681] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 15:58:01,882] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-06 15:58:01,882] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 15:58:01,883] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 16:06:37,975] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-06 16:06:38,159] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 16:06:38,165] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 16:06:38,184] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-06 16:06:38,184] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 16:06:38,185] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 16:20:36,698] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-06 16:20:36,935] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 16:20:36,970] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 16:20:37,060] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-06 16:20:37,061] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 16:20:37,062] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 16:27:58,013] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-06 16:27:58,023] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 16:27:58,165] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 16:27:58,238] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-06 16:27:58,238] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 16:27:58,239] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 17:07:47,887] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-06 17:07:47,898] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 17:07:47,907] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 17:07:47,926] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-06 17:07:47,926] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 17:07:47,927] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 20:27:01,355] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-06 20:27:01,364] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 20:27:01,375] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 20:27:01,395] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-06 20:27:01,395] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-06 20:27:01,396] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 10:25:26,782] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,DECODE(V.VISASTATUS,'06','?????????è??','05','é???¤±???è??', T.NO) NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-07 10:25:26,787] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 10:25:26,788] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 10:25:26,796] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-07 10:25:26,796] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 10:25:26,796] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 10:35:39,225] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,DECODE(V.VISASTATUS,'06','?????????è??','05','é???¤±???è??', T.NO) NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-07 10:35:39,229] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 10:35:39,230] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 10:35:39,238] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-07 10:35:39,238] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 10:35:39,238] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 10:35:52,354] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,DECODE(V.VISASTATUS,'06','?????????è??','05','é???¤±???è??', T.NO) NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-07 10:35:52,360] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 10:35:52,361] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 10:35:52,372] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-07 10:35:52,373] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 10:35:52,373] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 10:37:26,414] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,DECODE(V.VISASTATUS,'06','?????????è??','05','é???¤±???è??', T.NO) NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-07 10:37:26,418] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 10:37:26,418] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 10:37:26,426] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-07 10:37:26,427] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 10:37:26,427] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 10:40:22,653] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,DECODE(V.VISASTATUS,'06','?????????è??','05','é???¤±???è??', T.NO) NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-07 10:40:22,659] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 10:40:22,660] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 10:40:22,668] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-07 10:40:22,669] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 10:40:22,669] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 13:47:57,768] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,DECODE(V.VISASTATUS,'06','?????????è??','05','é???¤±???è??', T.NO) NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-07 13:47:57,772] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 13:47:57,773] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 13:47:57,786] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-07 13:47:57,786] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 13:47:57,787] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 13:51:57,176] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,DECODE(V.VISASTATUS,'06','?????????è??','05','é???¤±???è??', T.NO) NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-07 13:51:57,179] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 13:51:57,180] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 13:51:57,187] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-07 13:51:57,188] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 13:51:57,188] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 14:36:03,553] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,DECODE(V.VISASTATUS,'06','?????????è??','05','é???¤±???è??', T.NO) NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-07 14:36:03,667] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 14:36:03,685] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 14:36:03,710] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-07 14:36:03,711] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 14:36:03,711] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 15:05:08,253] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,DECODE(V.VISASTATUS,'06','?????????è??','05','é???¤±???è??', T.NO) NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-07 15:05:08,256] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 15:05:08,256] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 15:05:08,263] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-07 15:05:08,263] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 15:05:08,263] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 15:38:11,972] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,DECODE(V.VISASTATUS,'06','?????????è??','05','é???¤±???è??', T.NO) NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG != '04' THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG = '04' THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG != '04' THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS CASE WHEN V.VISASTATUS = '05' AND V.DUSTYFLAG IS NULL THEN 'é???¤±è?????' WHEN V.VISASTATUS = '06' AND V.DUSTYFLAG IS NULL THEN '?????????è??' WHEN V.VISASTATUS = '04' AND V.DUSTYFLAG IS NULL THEN '??????è??' ELSE '' END AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-07 15:38:11,985] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 15:38:11,994] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 15:38:12,017] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-07 15:38:12,017] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 15:38:12,018] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 16:08:23,274] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,DECODE(V.VISASTATUS,'06','作废单证','05','遗失单证', T.NO) NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG IS NOT NULL THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG IS NOT NULL THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG IS NOT NULL THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS CASE WHEN V.VISASTATUS = '05' AND V.DUSTYFLAG IS NULL THEN '遗失说明' WHEN V.VISASTATUS = '06' AND V.DUSTYFLAG IS NULL THEN '作废单证' WHEN V.VISASTATUS = '04' AND V.DUSTYFLAG IS NULL THEN '留存联' ELSE '' END AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-07 16:08:23,276] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 16:08:23,277] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 16:08:23,284] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-07 16:08:23,285] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 16:08:23,285] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 16:10:09,693] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,DECODE(V.VISASTATUS,'06','作废单证','05','遗失单证', T.NO) NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG IS NOT NULL THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG IS NOT NULL THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG IS NOT NULL THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS CASE WHEN V.VISASTATUS = '05' AND V.DUSTYFLAG IS NULL THEN '遗失说明' WHEN V.VISASTATUS = '06' AND V.DUSTYFLAG IS NULL THEN '作废单证' WHEN V.VISASTATUS = '04' AND V.DUSTYFLAG IS NULL THEN '留存联' ELSE '' END AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-07 16:10:09,695] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 16:10:09,696] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 16:10:09,709] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-07 16:10:09,709] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 16:10:09,710] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 16:11:14,659] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,DECODE(V.VISASTATUS,'06','作废单证','05','遗失单证', T.NO) NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG IS NOT NULL THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG IS NOT NULL THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG IS NOT NULL THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS CASE WHEN V.VISASTATUS = '05' AND V.DUSTYFLAG IS NULL THEN '遗失说明' WHEN V.VISASTATUS = '06' AND V.DUSTYFLAG IS NULL THEN '作废单证' WHEN V.VISASTATUS = '04' AND V.DUSTYFLAG IS NULL THEN '留存联' ELSE '' END AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-07 16:11:14,662] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 16:11:14,663] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 16:11:14,674] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-07 16:11:14,675] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 16:11:14,675] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 16:14:40,378] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,DECODE(V.VISASTATUS,'06','作废单证','05','遗失单证', T.NO) NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG IS NOT NULL THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG IS NOT NULL THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG IS NOT NULL THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS CASE WHEN V.VISASTATUS = '05' AND V.DUSTYFLAG IS NULL THEN '遗失说明' WHEN V.VISASTATUS = '06' AND V.DUSTYFLAG IS NULL THEN '作废单证' WHEN V.VISASTATUS = '04' AND V.DUSTYFLAG IS NULL THEN '留存联' ELSE '' END AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-07 16:14:40,381] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 16:14:40,382] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 16:14:40,390] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-07 16:14:40,390] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 16:14:40,391] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 16:15:49,952] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,DECODE(V.VISASTATUS,'06','作废单证','05','遗失单证', T.NO) NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG IS NOT NULL THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG IS NOT NULL THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG IS NOT NULL THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,'' AS CASE WHEN V.VISASTATUS = '05' AND V.DUSTYFLAG IS NULL THEN '遗失说明' WHEN V.VISASTATUS = '06' AND V.DUSTYFLAG IS NULL THEN '作废单证' WHEN V.VISASTATUS = '04' AND V.DUSTYFLAG IS NULL THEN '留存联' ELSE '' END AS LACKS,DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-07 16:15:49,955] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 16:15:49,956] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 16:15:49,963] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-07 16:15:49,964] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 16:15:49,964] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 16:42:56,268] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,DECODE(V.VISASTATUS,'06','作废单证','05','遗失单证', T.NO) NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG IS NOT NULL THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG IS NOT NULL THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG IS NOT NULL THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,CASE WHEN V.VISASTATUS = '05' AND V.DUSTYFLAG IS NULL THEN '遗失说明' WHEN V.VISASTATUS = '06' AND V.DUSTYFLAG IS NULL THEN '作废单证' WHEN V.VISASTATUS = '04' AND V.DUSTYFLAG IS NULL THEN '留存联' ELSE '' END AS LACKS, DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-07 16:42:56,271] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 16:42:56,272] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 16:42:56,282] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-07 16:42:56,283] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 16:42:56,283] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 17:44:54,189] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,DECODE(V.VISASTATUS,'06','作废单证','05','遗失单证', T.NO) NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG IS NOT NULL THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG IS NOT NULL THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG IS NOT NULL THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,CASE WHEN V.VISASTATUS = '05' AND V.DUSTYFLAG IS NULL THEN '遗失说明' WHEN V.VISASTATUS = '06' AND V.DUSTYFLAG IS NULL THEN '作废单证' WHEN V.VISASTATUS = '04' AND V.DUSTYFLAG IS NULL THEN '留存联' ELSE '' END AS LACKS, DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-07 17:44:54,199] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 17:44:54,207] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 17:44:54,226] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-07 17:44:54,227] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 17:44:54,227] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 17:52:25,959] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,DECODE(V.VISASTATUS,'06','作废单证','05','遗失单证', T.NO) NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG IS NOT NULL THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG IS NOT NULL THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG IS NOT NULL THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,CASE WHEN V.VISASTATUS = '05' AND V.DUSTYFLAG IS NULL THEN '遗失说明' WHEN V.VISASTATUS = '06' AND V.DUSTYFLAG IS NULL THEN '作废单证' WHEN V.VISASTATUS = '04' AND V.DUSTYFLAG IS NULL THEN '留存联' ELSE '' END AS LACKS, DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-07 17:52:25,969] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 17:52:25,979] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 17:52:25,999] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-07 17:52:25,999] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 17:52:26,000] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 18:24:13,985] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME,AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE,SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,DECODE(V.VISASTATUS,'06','作废单证','05','遗失单证', T.NO) NO,V.VISASERIALNO,T.LACKS,CASE WHEN T.FILE_STATUS = '11' AND V.DUSTYFLAG IS NOT NULL THEN '01' WHEN T.FILE_STATUS = '00' AND V.DUSTYFLAG IS NOT NULL THEN '01' WHEN T.FILE_STATUS = '10' AND V.DUSTYFLAG IS NOT NULL THEN '01' ELSE T.FILE_STATUS END AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASTATUS AS NO,V.VISASERIALNO,CASE WHEN V.VISASTATUS = '05' AND V.DUSTYFLAG IS NULL THEN '遗失说明' WHEN V.VISASTATUS = '06' AND V.DUSTYFLAG IS NULL THEN '作废单证' WHEN V.VISASTATUS = '04' AND V.DUSTYFLAG IS NULL THEN '留存联' ELSE '' END AS LACKS, DECODE(V.DUSTYFLAG,'04','11','00') AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, V.COMCODE AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL UNION SELECT T.ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS,'' AS VISACODE,'' AS VISANAME,T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE TYPE <> 'V' AND NOT EXISTS(SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-12-07 18:24:13,996] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 18:24:14,003] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 18:24:14,024] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-12-07 18:24:14,024] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-12-07 18:24:14,024] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
