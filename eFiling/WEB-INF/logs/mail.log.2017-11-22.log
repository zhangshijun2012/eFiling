[DEBUG][2017-11-14 09:45:15,743] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-14 09:45:15,754] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 09:45:15,763] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 09:45:15,782] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-14 09:45:15,783] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 09:45:15,783] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 09:54:48,921] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-14 09:54:48,930] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 09:54:48,942] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 09:54:48,962] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-14 09:54:48,962] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 09:54:48,962] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:43:34,816] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-14 16:43:34,819] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:43:34,820] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:43:34,831] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-14 16:43:34,832] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:43:34,832] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:47:19,425] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-14 16:47:19,429] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:47:19,430] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:47:19,443] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-14 16:47:19,445] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:47:19,446] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:49:05,430] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-14 16:49:05,434] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:49:05,435] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:49:05,445] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-14 16:49:05,445] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:49:05,446] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:51:27,501] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-14 16:51:27,504] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:51:27,504] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:51:27,514] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-14 16:51:27,514] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:51:27,515] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:55:29,989] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-14 16:55:29,991] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:55:29,992] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:55:30,000] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-14 16:55:30,000] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:55:30,000] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:58:25,953] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-14 16:58:25,955] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:58:25,956] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:58:25,963] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-14 16:58:25,963] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:58:25,963] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:59:30,858] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-14 16:59:30,861] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:59:30,862] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:59:30,872] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-14 16:59:30,872] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 16:59:30,873] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 17:03:31,049] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-14 17:03:31,052] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 17:03:31,053] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 17:03:31,061] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-14 17:03:31,062] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 17:03:31,062] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 17:07:30,353] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-14 17:07:30,355] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 17:07:30,356] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 17:07:30,365] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-14 17:07:30,365] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 17:07:30,366] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 18:09:57,899] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-14 18:09:57,914] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 18:09:57,924] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 18:09:57,961] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-14 18:09:57,962] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 18:09:57,962] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 18:15:02,472] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-14 18:15:02,474] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 18:15:02,475] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 18:15:02,482] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-14 18:15:02,483] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-14 18:15:02,483] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 09:48:28,903] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 09:48:28,924] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 09:48:28,925] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 09:48:28,933] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 09:48:28,934] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 09:48:28,934] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 09:52:31,213] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 09:52:31,221] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 09:52:31,227] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 09:52:31,244] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 09:52:31,245] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 09:52:31,245] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:16:14,409] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 10:16:14,411] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:16:14,412] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:16:14,421] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 10:16:14,421] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:16:14,421] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:21:21,818] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 10:21:21,821] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:21:21,821] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:21:21,829] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 10:21:21,830] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:21:21,830] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:24:36,085] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 10:24:36,088] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:24:36,088] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:24:36,095] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 10:24:36,096] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:24:36,096] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:28:48,689] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 10:28:48,691] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:28:48,692] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:28:48,699] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 10:28:48,700] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:28:48,700] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:42:15,462] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 10:42:15,465] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:42:15,465] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:42:15,474] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 10:42:15,475] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:42:15,475] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:54:15,014] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 10:54:15,016] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:54:15,017] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:54:15,024] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 10:54:15,025] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:54:15,025] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:58:15,532] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 10:58:15,535] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:58:15,535] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:58:15,541] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 10:58:15,542] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:58:15,542] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:59:34,685] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 10:59:34,688] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:59:34,688] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:59:34,697] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 10:59:34,697] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 10:59:34,697] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:05:44,900] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 11:05:44,905] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:05:44,906] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:05:44,921] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 11:05:44,925] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:05:44,927] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:06:54,142] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 11:06:54,152] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:06:54,158] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:06:54,177] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 11:06:54,177] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:06:54,178] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:10:03,511] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 11:10:03,513] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:10:03,514] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:10:03,521] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 11:10:03,521] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:10:03,522] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:19:26,055] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 11:19:26,058] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:19:26,059] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:19:26,068] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 11:19:26,069] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:19:26,070] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:24:33,883] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 11:24:33,886] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:24:33,887] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:24:33,895] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 11:24:33,896] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:24:33,896] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:25:30,383] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 11:25:30,386] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:25:30,387] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:25:30,395] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 11:25:30,395] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:25:30,396] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:46:16,120] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 11:46:16,123] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:46:16,124] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:46:16,131] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 11:46:16,131] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:46:16,132] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:46:59,022] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 11:46:59,024] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:46:59,025] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:46:59,034] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 11:46:59,039] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 11:46:59,040] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 14:28:23,229] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 14:28:23,232] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 14:28:23,232] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 14:28:23,239] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 14:28:23,240] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 14:28:23,240] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 16:02:52,692] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 16:02:52,695] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 16:02:52,696] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 16:02:52,705] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 16:02:52,706] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 16:02:52,706] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 16:29:37,406] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 16:29:37,413] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 16:29:37,419] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 16:29:37,436] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 16:29:37,436] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 16:29:37,437] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 16:48:08,785] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 16:48:08,787] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 16:48:08,788] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 16:48:08,797] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 16:48:08,797] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 16:48:08,798] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:12:09,054] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 17:12:09,057] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:12:09,057] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:12:09,065] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 17:12:09,066] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:12:09,066] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:20:08,877] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 17:20:08,879] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:20:08,880] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:20:08,887] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 17:20:08,888] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:20:08,888] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:27:22,435] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 17:27:22,438] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:27:22,439] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:27:22,449] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 17:27:22,450] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:27:22,450] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:31:11,074] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 17:31:11,082] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:31:11,090] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:31:11,110] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 17:31:11,111] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:31:11,111] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:37:36,293] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 17:37:36,295] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:37:36,296] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:37:36,303] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 17:37:36,303] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:37:36,304] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:45:36,981] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 17:45:36,984] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:45:36,985] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:45:36,992] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 17:45:36,992] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:45:36,993] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:49:37,805] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 17:49:37,807] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:49:37,808] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:49:37,816] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 17:49:37,816] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:49:37,817] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:53:37,107] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 17:53:37,109] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:53:37,110] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:53:37,117] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 17:53:37,117] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:53:37,118] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:57:36,596] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 17:57:36,598] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:57:36,599] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:57:36,608] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 17:57:36,608] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 17:57:36,609] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 18:01:36,714] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-15 18:01:36,717] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 18:01:36,717] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 18:01:36,725] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-15 18:01:36,725] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-15 18:01:36,725] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 16:21:52,089] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-16 16:21:52,172] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 16:21:52,184] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 16:21:52,217] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-16 16:21:52,218] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 16:21:52,218] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 16:22:39,045] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-16 16:22:39,048] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 16:22:39,048] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 16:22:39,056] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-16 16:22:39,056] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 16:22:39,057] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:00:43,405] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-16 17:00:43,408] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:00:43,409] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:00:43,421] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-16 17:00:43,421] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:00:43,421] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:04:44,042] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-16 17:04:44,046] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:04:44,046] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:04:44,055] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-16 17:04:44,055] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:04:44,056] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:07:21,413] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-16 17:07:21,416] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:07:21,416] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:07:21,425] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-16 17:07:21,425] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:07:21,426] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:08:42,801] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-16 17:08:42,805] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:08:42,806] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:08:42,815] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-16 17:08:42,816] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:08:42,816] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:11:21,509] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-16 17:11:21,511] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:11:21,511] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:11:21,519] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-16 17:11:21,520] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:11:21,520] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:15:22,034] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-16 17:15:22,037] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:15:22,038] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:15:22,045] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-16 17:15:22,046] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:15:22,046] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:19:21,837] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-16 17:19:21,839] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:19:21,840] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:19:21,847] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-16 17:19:21,848] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:19:21,848] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:36:52,372] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-16 17:36:52,379] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:36:52,385] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:36:52,401] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-16 17:36:52,402] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:36:52,402] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:43:02,979] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-16 17:43:02,982] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:43:02,982] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:43:02,989] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-16 17:43:02,989] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:43:02,990] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:48:32,008] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-16 17:48:32,011] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:48:32,012] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:48:32,020] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-16 17:48:32,020] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:48:32,020] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:56:39,062] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-16 17:56:39,065] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:56:39,065] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:56:39,074] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-16 17:56:39,075] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 17:56:39,075] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 18:04:39,915] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-16 18:04:39,918] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 18:04:39,918] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 18:04:39,925] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-16 18:04:39,926] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 18:04:39,926] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 18:06:13,723] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-16 18:06:13,725] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 18:06:13,726] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 18:06:13,734] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-16 18:06:13,735] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-16 18:06:13,735] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 09:40:28,719] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 09:40:28,727] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 09:40:28,737] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 09:40:28,762] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 09:40:28,763] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 09:40:28,763] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 09:47:00,927] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 09:47:00,930] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 09:47:00,930] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 09:47:00,941] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 09:47:00,941] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 09:47:00,941] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 09:58:25,311] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, ??????#=é???????????sql?????????, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 09:58:25,314] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 09:58:25,314] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 09:58:25,323] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 09:58:25,323] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 09:58:25,324] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 11:14:25,463] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') UNION SELECT T.ID ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 11:14:25,466] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 11:14:25,467] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 11:14:25,475] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 11:14:25,475] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 11:14:25,476] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 11:18:25,786] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') UNION SELECT T.ID ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 11:18:25,788] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 11:18:25,788] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 11:18:25,796] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 11:18:25,797] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 11:18:25,797] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 11:38:26,710] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') UNION SELECT T.ID ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 11:38:26,713] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 11:38:26,713] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 11:38:26,722] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 11:38:26,723] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 11:38:26,723] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 12:01:28,238] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') UNION SELECT T.ID ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 12:01:28,250] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 12:01:28,259] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 12:01:28,276] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 12:01:28,277] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 12:01:28,277] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 12:35:36,067] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') UNION SELECT T.ID ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 12:35:36,069] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 12:35:36,070] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 12:35:36,077] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 12:35:36,078] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 12:35:36,078] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 12:36:29,832] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') UNION SELECT T.ID ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 12:36:29,834] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 12:36:29,835] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 12:36:29,842] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 12:36:29,843] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 12:36:29,843] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 12:39:27,606] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') UNION SELECT T.ID ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 12:39:27,609] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 12:39:27,609] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 12:39:27,616] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 12:39:27,616] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 12:39:27,617] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 14:14:37,195] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') UNION SELECT T.ID ID,T.NO,'' AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 14:14:37,198] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 14:14:37,199] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 14:14:37,206] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 14:14:37,207] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 14:14:37,207] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 14:49:17,631] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 14:49:17,640] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 14:49:17,649] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 14:49:17,668] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 14:49:17,669] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 14:49:17,669] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 15:09:48,249] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 15:09:48,252] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 15:09:48,253] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 15:09:48,260] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 15:09:48,261] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 15:09:48,261] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 15:11:42,997] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 15:11:42,999] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 15:11:43,000] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 15:11:43,007] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 15:11:43,008] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 15:11:43,008] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 15:25:45,094] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 15:25:45,097] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 15:25:45,098] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 15:25:45,105] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 15:25:45,106] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 15:25:45,106] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 15:26:55,506] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 15:26:55,508] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 15:26:55,509] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 15:26:55,518] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 15:26:55,519] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 15:26:55,519] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 15:34:55,837] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 15:34:55,839] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 15:34:55,840] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 15:34:55,847] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 15:34:55,847] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 15:34:55,847] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 15:38:55,179] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 15:38:55,181] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 15:38:55,182] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 15:38:55,192] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 15:38:55,192] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 15:38:55,192] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:02:55,790] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 16:02:55,793] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:02:55,794] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:02:55,803] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 16:02:55,804] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:02:55,804] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:21:17,483] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 16:21:17,485] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:21:17,486] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:21:17,495] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 16:21:17,496] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:21:17,496] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:23:05,900] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 16:23:05,903] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:23:05,904] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:23:05,957] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 16:23:05,958] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:23:05,959] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:41:30,642] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 16:41:30,652] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:41:30,660] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:41:30,683] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 16:41:30,683] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:41:30,684] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:49:18,792] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 16:49:18,795] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:49:18,795] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:49:18,805] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 16:49:18,806] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:49:18,806] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:49:59,136] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 16:49:59,140] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:49:59,141] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:49:59,150] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 16:49:59,150] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:49:59,151] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:53:16,277] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 16:53:16,280] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:53:16,281] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:53:16,290] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 16:53:16,290] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:53:16,291] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:57:16,152] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 16:57:16,155] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:57:16,155] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:57:16,163] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 16:57:16,163] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 16:57:16,164] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 17:21:16,952] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 17:21:16,955] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 17:21:16,956] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 17:21:16,964] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 17:21:16,965] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 17:21:16,965] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 17:25:19,324] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 17:25:19,327] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 17:25:19,328] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 17:25:19,335] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 17:25:19,336] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 17:25:19,336] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 20:48:34,049] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 20:48:34,060] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 20:48:34,069] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 20:48:34,093] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 20:48:34,093] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 20:48:34,094] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 21:23:51,158] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-17 21:23:51,161] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 21:23:51,162] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 21:23:51,175] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-17 21:23:51,176] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-17 21:23:51,176] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 10:23:53,034] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 10:23:53,100] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 10:23:53,154] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 10:23:53,189] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 10:23:53,190] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 10:23:53,190] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 10:29:40,093] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 10:29:40,096] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 10:29:40,097] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 10:29:40,106] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 10:29:40,107] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 10:29:40,108] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 10:31:46,387] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 10:31:46,390] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 10:31:46,391] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 10:31:46,403] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 10:31:46,404] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 10:31:46,404] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 10:41:20,890] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 10:41:20,900] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 10:41:20,914] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 10:41:20,939] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 10:41:20,940] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 10:41:20,940] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 10:50:24,608] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 10:50:24,611] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 10:50:24,612] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 10:50:24,619] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 10:50:24,619] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 10:50:24,620] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 10:58:24,648] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 10:58:24,651] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 10:58:24,652] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 10:58:24,662] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 10:58:24,662] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 10:58:24,663] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:02:24,841] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 11:02:24,844] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:02:24,845] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:02:24,857] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 11:02:24,857] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:02:24,857] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:06:25,497] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 11:06:25,501] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:06:25,502] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:06:25,512] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 11:06:25,512] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:06:25,512] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:10:26,060] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 11:10:26,063] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:10:26,064] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:10:26,075] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 11:10:26,076] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:10:26,077] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:14:29,637] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 11:14:29,643] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:14:29,643] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:14:29,656] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 11:14:29,656] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:14:29,657] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:18:31,079] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 11:18:31,082] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:18:31,083] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:18:31,094] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 11:18:31,094] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:18:31,095] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:22:28,940] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 11:22:28,945] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:22:28,945] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:22:28,957] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 11:22:28,957] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:22:28,958] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:26:30,356] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 11:26:30,360] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:26:30,361] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:26:30,372] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 11:26:30,373] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:26:30,373] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:33:14,973] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 11:33:14,984] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:33:14,993] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:33:15,025] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 11:33:15,026] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:33:15,028] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:44:23,009] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 11:44:23,013] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:44:23,013] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:44:23,023] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 11:44:23,024] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:44:23,024] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:48:24,280] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 11:48:24,284] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:48:24,285] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:48:24,296] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 11:48:24,296] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:48:24,298] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:52:24,205] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 11:52:24,209] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:52:24,210] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:52:24,222] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 11:52:24,222] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:52:24,223] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:56:24,466] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 11:56:24,472] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:56:24,473] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:56:24,484] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 11:56:24,487] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 11:56:24,493] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 12:28:25,236] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 12:28:25,239] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 12:28:25,240] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 12:28:25,249] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 12:28:25,250] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 12:28:25,250] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 12:32:24,730] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 12:32:24,734] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 12:32:24,735] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 12:32:24,747] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 12:32:24,748] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 12:32:24,748] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 12:52:21,790] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 12:52:21,793] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 12:52:21,793] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 12:52:21,802] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 12:52:21,803] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 12:52:21,803] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:03:10,234] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 13:03:10,247] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:03:10,258] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:03:10,287] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 13:03:10,288] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:03:10,288] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:07:53,247] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 13:07:53,250] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:07:53,251] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:07:53,261] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 13:07:53,261] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:07:53,262] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:12:10,673] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 13:12:10,678] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:12:10,679] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:12:10,687] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 13:12:10,688] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:12:10,690] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:13:36,211] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 13:13:36,214] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:13:36,216] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:13:36,226] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 13:13:36,226] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:13:36,227] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:15:12,469] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 13:15:12,472] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:15:12,473] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:15:12,482] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 13:15:12,483] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:15:12,483] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:21:45,551] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 13:21:45,554] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:21:45,555] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:21:45,565] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 13:21:45,566] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:21:45,567] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:25:44,570] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 13:25:44,573] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:25:44,574] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:25:44,584] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 13:25:44,585] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:25:44,585] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:29:44,814] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 13:29:44,817] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:29:44,818] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:29:44,827] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 13:29:44,828] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:29:44,828] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:33:44,726] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 13:33:44,729] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:33:44,730] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:33:44,740] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 13:33:44,741] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:33:44,741] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:39:09,002] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 13:39:09,005] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:39:09,006] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:39:09,017] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 13:39:09,017] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:39:09,017] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:53:18,205] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 13:53:18,218] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:53:18,226] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:53:18,246] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 13:53:18,246] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 13:53:18,247] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 14:18:31,960] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 14:18:31,963] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 14:18:31,964] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 14:18:31,971] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 14:18:31,971] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 14:18:31,971] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 14:22:32,494] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 14:22:32,668] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 14:22:32,669] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 14:22:32,678] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 14:22:32,679] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 14:22:32,679] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 14:24:13,732] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 14:24:13,734] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 14:24:13,734] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 14:24:13,742] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 14:24:13,743] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 14:24:13,743] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 14:52:04,218] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 14:52:04,221] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 14:52:04,221] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 14:52:04,228] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 14:52:04,228] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 14:52:04,229] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 14:56:58,940] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 14:56:58,942] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 14:56:58,943] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 14:56:58,950] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 14:56:58,951] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 14:56:58,951] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 15:05:00,276] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 15:05:00,279] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 15:05:00,280] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 15:05:00,288] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 15:05:00,289] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 15:05:00,289] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 15:09:00,361] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 15:09:00,364] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 15:09:00,364] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 15:09:00,374] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 15:09:00,374] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 15:09:00,375] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 15:13:00,502] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 15:13:00,504] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 15:13:00,506] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 15:13:00,516] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 15:13:00,517] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 15:13:00,517] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 15:17:05,535] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 15:17:05,537] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 15:17:05,538] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 15:17:05,545] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 15:17:05,546] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 15:17:05,546] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 16:12:32,264] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 16:12:32,275] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 16:12:32,283] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 16:12:32,320] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 16:12:32,321] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 16:12:32,324] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 16:26:53,224] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-20 16:26:53,226] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 16:26:53,227] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 16:26:53,234] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-20 16:26:53,235] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-20 16:26:53,235] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 09:23:54,322] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 09:23:54,435] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 09:23:54,442] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 09:23:54,474] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 09:23:54,475] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 09:23:54,475] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 10:13:52,413] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 10:13:52,444] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 10:13:52,476] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 10:13:52,491] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 10:13:52,491] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 10:13:52,491] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:15:40,234] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 13:15:40,239] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:15:40,240] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:15:40,255] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 13:15:40,255] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:15:40,255] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:19:35,162] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 13:19:35,165] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:19:35,165] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:19:35,172] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 13:19:35,173] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:19:35,173] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:23:35,947] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 13:23:35,951] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:23:35,951] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:23:35,960] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 13:23:35,960] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:23:35,960] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:27:35,926] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 13:27:35,929] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:27:35,930] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:27:35,938] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 13:27:35,939] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:27:35,939] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:31:36,336] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 13:31:36,339] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:31:36,340] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:31:36,353] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 13:31:36,353] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:31:36,354] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:35:36,029] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 13:35:36,032] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:35:36,032] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:35:36,040] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 13:35:36,040] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:35:36,040] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:39:36,088] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 13:39:36,091] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:39:36,092] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:39:36,100] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 13:39:36,100] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:39:36,101] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:43:35,980] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 13:43:35,982] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:43:35,983] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:43:35,991] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 13:43:35,991] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:43:35,991] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:51:38,009] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 13:51:38,011] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:51:38,012] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:51:38,021] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 13:51:38,022] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 13:51:38,022] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:00:30,077] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 14:00:30,086] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:00:30,094] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:00:30,117] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 14:00:30,118] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:00:30,119] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:07:04,202] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 14:07:04,205] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:07:04,206] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:07:04,214] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 14:07:04,214] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:07:04,215] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:11:04,597] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 14:11:04,599] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:11:04,600] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:11:04,609] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 14:11:04,610] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:11:04,610] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:15:04,241] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 14:15:04,244] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:15:04,245] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:15:04,254] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 14:15:04,254] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:15:04,255] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:19:04,643] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 14:19:04,647] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:19:04,647] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:19:04,656] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 14:19:04,659] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:19:04,659] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:23:04,891] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 14:23:04,894] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:23:04,894] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:23:04,902] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 14:23:04,903] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:23:04,903] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:27:05,459] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 14:27:05,463] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:27:05,464] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:27:05,474] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 14:27:05,475] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:27:05,475] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:30:26,432] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 14:30:26,434] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:30:26,435] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:30:26,443] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 14:30:26,443] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:30:26,443] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:47:35,521] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 14:47:35,523] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:47:35,524] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:47:35,531] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 14:47:35,532] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:47:35,532] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:51:36,609] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 14:51:36,611] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:51:36,612] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:51:36,621] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 14:51:36,622] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:51:36,622] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:57:52,472] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 14:57:52,480] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:57:52,486] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:57:52,521] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 14:57:52,522] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 14:57:52,522] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:05:31,044] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 15:05:31,047] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:05:31,048] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:05:31,059] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 15:05:31,060] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:05:31,061] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:12:20,811] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 15:12:20,814] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:12:20,815] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:12:20,825] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 15:12:20,827] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:12:20,827] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:16:21,826] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 15:16:21,830] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:16:21,830] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:16:21,842] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 15:16:21,843] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:16:21,843] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:18:05,025] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 15:18:05,030] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:18:05,031] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:18:05,038] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 15:18:05,039] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:18:05,039] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:24:21,644] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 15:24:21,696] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:24:21,697] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:24:21,706] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 15:24:21,706] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:24:21,706] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:26:35,675] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 15:26:35,678] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:26:35,678] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:26:35,690] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 15:26:35,690] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:26:35,695] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:30:40,975] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 15:30:40,977] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:30:40,978] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:30:40,986] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 15:30:40,986] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:30:40,987] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:32:46,905] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 15:32:46,908] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:32:46,908] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:32:46,914] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 15:32:46,914] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:32:46,915] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:37:21,350] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 15:37:21,359] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:37:21,366] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:37:21,390] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 15:37:21,390] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:37:21,390] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:47:21,044] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 15:47:21,047] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:47:21,047] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:47:21,056] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 15:47:21,056] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:47:21,057] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:50:18,359] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 15:50:18,362] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:50:18,363] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:50:18,371] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 15:50:18,372] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:50:18,372] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:58:15,385] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 15:58:15,387] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:58:15,388] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:58:15,397] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 15:58:15,397] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 15:58:15,398] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 16:10:17,638] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 16:10:17,641] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 16:10:17,641] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 16:10:17,649] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 16:10:17,650] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 16:10:17,650] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 16:26:17,123] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 16:26:17,126] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 16:26:17,126] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 16:26:17,136] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 16:26:17,137] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 16:26:17,137] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 16:42:16,916] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 16:42:16,918] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 16:42:16,919] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 16:42:16,925] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 16:42:16,925] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 16:42:16,925] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 16:47:20,995] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 16:47:21,003] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 16:47:21,011] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 16:47:21,029] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 16:47:21,029] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 16:47:21,030] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 16:54:29,527] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 16:54:29,529] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 16:54:29,529] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 16:54:29,539] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 16:54:29,539] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 16:54:29,539] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 16:55:58,717] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 16:55:58,725] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 16:55:58,732] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 16:55:58,749] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 16:55:58,749] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 16:55:58,750] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:05:52,246] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 17:05:52,249] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:05:52,249] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:05:52,257] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 17:05:52,258] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:05:52,258] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:09:52,001] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 17:09:52,004] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:09:52,005] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:09:52,014] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 17:09:52,015] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:09:52,015] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:19:22,528] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 17:19:22,530] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:19:22,531] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:19:22,538] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 17:19:22,538] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:19:22,538] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:31:43,330] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 17:31:43,334] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:31:43,335] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:31:43,344] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 17:31:43,344] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:31:43,345] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:42:41,108] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 17:42:41,111] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:42:41,111] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:42:41,118] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 17:42:41,118] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:42:41,119] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:46:40,357] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 17:46:40,359] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:46:40,360] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:46:40,367] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 17:46:40,368] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:46:40,368] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:50:40,728] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 17:50:40,731] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:50:40,731] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:50:40,740] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 17:50:40,741] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:50:40,741] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:54:41,198] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 17:54:41,201] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:54:41,201] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:54:41,209] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 17:54:41,210] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:54:41,210] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:58:47,582] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 17:58:47,585] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:58:47,585] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:58:47,594] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 17:58:47,594] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 17:58:47,594] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 18:03:21,188] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 18:03:21,195] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 18:03:21,201] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 18:03:21,216] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 18:03:21,216] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 18:03:21,216] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 18:25:25,947] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 18:25:25,952] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 18:25:25,953] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 18:25:25,961] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 18:25:25,964] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 18:25:25,965] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 18:28:25,680] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 18:28:25,683] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 18:28:25,683] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 18:28:25,690] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 18:28:25,691] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 18:28:25,691] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 18:32:34,718] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 18:32:34,721] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 18:32:34,721] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 18:32:34,727] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 18:32:34,728] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 18:32:34,728] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 18:37:27,061] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 18:37:27,064] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 18:37:27,065] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 18:37:27,073] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 18:37:27,074] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 18:37:27,074] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 18:56:37,590] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 18:56:37,593] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 18:56:37,594] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 18:56:37,603] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 18:56:37,603] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 18:56:37,604] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:03:55,352] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT * FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT * FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO OR T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 19:03:55,355] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:03:55,355] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:03:55,365] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 19:03:55,366] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:03:55,366] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:22:45,043] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 19:22:45,191] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:22:45,197] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:22:45,214] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 19:22:45,215] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:22:45,215] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:26:34,459] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 19:26:34,461] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:26:34,462] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:26:34,468] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 19:26:34,469] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:26:34,469] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:33:06,402] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 19:33:06,405] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:33:06,405] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:33:06,413] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 19:33:06,414] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:33:06,414] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:37:05,954] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 19:37:05,956] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:37:05,957] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:37:05,963] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 19:37:05,964] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:37:05,965] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:41:06,207] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 19:41:06,209] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:41:06,210] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:41:06,218] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 19:41:06,218] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:41:06,219] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:44:57,796] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 19:44:57,799] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:44:57,799] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:44:57,805] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 19:44:57,806] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:44:57,806] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:54:22,575] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 19:54:22,578] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:54:22,579] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:54:22,586] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 19:54:22,587] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:54:22,587] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:56:26,027] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 19:56:26,030] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:56:26,031] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:56:26,037] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 19:56:26,038] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 19:56:26,038] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 21:40:50,610] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 21:40:50,620] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 21:40:50,628] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 21:40:50,651] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 21:40:50,652] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 21:40:50,652] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 22:28:39,049] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 22:28:39,053] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 22:28:39,054] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 22:28:39,063] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 22:28:39,064] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 22:28:39,064] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 23:49:19,542] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-21 23:49:19,545] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 23:49:19,546] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 23:49:19,556] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-21 23:49:19,556] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-21 23:49:19,557] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 00:01:19,731] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 00:01:19,734] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 00:01:19,735] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 00:01:19,742] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 00:01:19,742] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 00:01:19,742] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 00:05:20,548] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 00:05:20,554] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 00:05:20,554] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 00:05:20,562] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 00:05:20,564] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 00:05:20,564] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 00:06:54,807] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 00:06:54,812] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 00:06:54,813] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 00:06:54,822] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 00:06:54,822] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 00:06:54,823] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 09:26:43,361] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 09:26:43,408] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 09:26:43,414] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 09:26:43,428] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 09:26:43,429] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 09:26:43,429] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 10:03:20,570] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 10:03:20,573] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 10:03:20,574] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 10:03:20,580] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 10:03:20,580] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 10:03:20,583] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 10:04:34,141] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 10:04:34,144] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 10:04:34,144] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 10:04:34,156] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 10:04:34,157] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 10:04:34,158] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 10:06:45,128] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 10:06:45,130] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 10:06:45,131] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 10:06:45,136] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 10:06:45,137] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 10:06:45,137] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 11:23:21,202] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 11:23:21,205] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 11:23:21,206] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 11:23:21,213] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 11:23:21,214] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 11:23:21,214] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 12:55:20,992] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 12:55:20,994] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 12:55:20,995] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 12:55:21,001] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 12:55:21,002] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 12:55:21,002] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 12:59:21,719] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 12:59:21,721] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 12:59:21,722] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 12:59:21,728] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 12:59:21,729] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 12:59:21,729] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 13:03:22,902] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 13:03:22,905] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 13:03:22,905] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 13:03:22,915] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 13:03:22,916] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 13:03:22,917] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 13:07:22,579] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 13:07:22,582] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 13:07:22,583] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 13:07:22,589] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 13:07:22,590] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 13:07:22,590] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 13:08:51,087] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 13:08:51,098] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 13:08:51,106] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 13:08:51,126] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 13:08:51,126] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 13:08:51,126] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 13:24:01,527] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 13:24:01,529] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 13:24:01,530] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 13:24:01,536] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 13:24:01,537] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 13:24:01,537] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 16:19:06,515] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT T.ID ID,T.NO,T.VISA_NO AS VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,'' AS VISASTATUS, '' AS VISACODE,'' AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE NOT EXISTS (SELECT COUNT(1) FROM VSMARK V WHERE T.NO = V.BUSINESSNO AND V.VISASTATUS IN('04','05','06')) UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.BUSINESSNO) AND NOT EXISTS(SELECT COUNT(1) FROM T_F_DOCUMENT T WHERE T.NO = V.VISASERIALNO)), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 16:19:06,518] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 16:19:06,518] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 16:19:06,527] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 16:19:06,528] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 16:19:06,539] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 17:23:46,394] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 17:23:46,404] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 17:23:46,577] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 17:23:46,593] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 17:23:46,594] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 17:23:46,594] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 17:38:29,029] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 17:38:29,032] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 17:38:29,034] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 17:38:29,044] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 17:38:29,044] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 17:38:29,045] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 17:40:21,316] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 17:40:21,320] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 17:40:21,321] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 17:40:21,330] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 17:40:21,330] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 17:40:21,330] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 17:42:32,444] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 17:42:32,456] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 17:42:32,464] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 17:42:32,483] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 17:42:32,484] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 17:42:32,484] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 17:49:40,171] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 17:49:40,174] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 17:49:40,175] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 17:49:40,185] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 17:49:40,186] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 17:49:40,186] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 17:52:27,385] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 17:52:27,388] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 17:52:27,390] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 17:52:27,398] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 17:52:27,399] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 17:52:27,399] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 18:21:02,065] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 18:21:02,067] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 18:21:02,068] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 18:21:02,074] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 18:21:02,075] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 18:21:02,075] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 20:12:48,635] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 20:12:48,645] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 20:12:48,653] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 20:12:48,680] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 20:12:48,681] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 20:12:48,681] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 20:25:35,041] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 20:25:35,049] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 20:25:35,052] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 20:25:35,065] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 20:25:35,065] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 20:25:35,066] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 20:45:57,858] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 20:45:57,867] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 20:45:57,868] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 20:45:57,884] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 20:45:57,884] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 20:45:57,888] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 20:49:56,786] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT * FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 20:49:56,790] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 20:49:56,790] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 20:49:56,799] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 20:49:56,800] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 20:49:56,800] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 21:09:57,880] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME, AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE, SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 21:09:57,884] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 21:09:57,884] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 21:09:57,895] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 21:09:57,895] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 21:09:57,896] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 21:20:54,093] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{include=sql.properties, timer.properties, mail.properties, sql.query.paperFile=SELECT ID,NO,VISASERIALNO,LACKS,FILE_STATUS,APPLICANT,SALESNAME,COMCNAME, AGENT_NAME,BUSINESSNAME,VISASTATUS,VISACODE,VISANAME,BUSINESS_COMPANY_ID,PROPOSAL_NO,POLICY_NO,ENDOR_NO,COMCODE,BUSINESS_NO,PRODUCT_ID,TYPE,VISATYPE, SALES_TIME FROM (SELECT T.ID || ',' || V.VISASERIALNO ID,T.NO,V.VISASERIALNO,T.LACKS,T.FILE_STATUS AS FILE_STATUS,T.APPLICANT AS APPLICANT,PU3.USERNAME AS SALESNAME,PC.COMCNAME AS COMCNAME,T.AGENT_NAME AS AGENT_NAME,PU1.USERNAME AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE,V.VISANAME AS VISANAME, T.BUSINESS_COMPANY_ID AS BUSINESS_COMPANY_ID,T.PROPOSAL_NO AS PROPOSAL_NO,T.POLICY_NO AS POLICY_NO,T.ENDOR_NO AS ENDOR_NO,PC.COMCODE AS COMCODE,T.BUSINESS_NO AS BUSINESS_NO,T.PRODUCT_ID AS PRODUCT_ID,T.TYPE AS TYPE,'V' AS VISATYPE,T.SALES_TIME AS SALES_TIME FROM T_F_DOCUMENT T INNER JOIN VSMARK V ON T.NO = V.BUSINESSNO LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE WHERE V.VISASTATUS IN('04','05','06') AND TYPE <> 'V' UNION SELECT V.VISASERIALNO ID,V.VISASERIALNO AS NO,V.VISASERIALNO,'' AS LACKS,'' AS FILE_STATUS,'' AS APPLICANT,'' AS SALESNAME,'' AS COMCNAME,'' AS AGENT_NAME,'' AS BUSINESSNAME,V.VISASTATUS AS VISASTATUS,V.VISACODE AS VISACODE, V.VISANAME AS VISANAME, '' AS BUSINESS_COMPANY_ID,'' AS PROPOSAL_NO,'' AS POLICY_NO,'' AS ENDOR_NO,V.COMCODE AS COMCODE,'' AS BUSINESS_NO,'' AS PRODUCT_ID,'V' AS TYPE,'V' AS VISATYPE,V.USEDATE AS SALES_TIME FROM VSMARK V WHERE V.VISASTATUS IN('04','05','06') AND V.BUSINESSNO IS NULL), timer.reminder.template=timer.reminder, sql.queryClient.endor.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.debug.to=15922901803@163.com,Laura.Luo@libertymutual.com.cn,annie.zhang@libertymutual.com.cn, timer.document.complement.date=2014-04-27, mail.smtp.auth=false, mail.disabled=false, sql.queryVehicle.policy=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCITEMCAR T LEFT JOIN PRPCITEMCAREXT C ON C.POLICYNO = T.POLICYNO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, mail.password=, timer.document.share.sql=select no from t_f_document t where id in (select document_id from t_f_document_file a where a.status = ? and a.paper_type is not null and a.paper_code is not null and a.due_time is not null and exists (select * from t_f_document_file b where b.status = ? and (b.file_type_id = a.file_type_id or b.file_type_code = a.file_type_code or (a.file_type_id in ('200', '201') and b.file_type_id in ('200', '201'))) and b.paper_type = a.paper_type and b.paper_code = a.paper_code and b.due_time is not null)) and t.status = ? , timer.reminder.days=-10, timer.reminder.title=投保资料差缺到期提醒, sql.queryCarOwner.proposal=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPTCAROWNER T INNER JOIN PRPTITEMCAR C ON C.PROPOSALNO = T.PROPOSALNO WHERE T.PROPOSALNO = ?, scan.read.class.code.motor=05, sql.queryCarOwner.policy=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCCAROWNER T INNER JOIN PRPCITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.encoding=UTF-8, sql.check.commit=SELECT DISTINCT NO FROM ( SELECT T.ID, T.NO, T.FILE_STATUS, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), ?) AS CTRL_TYPE FROM T_F_DOCUMENT T INNER JOIN T_F_DOCUMENT_FILE TT ON T.ID = TT.DOCUMENT_ID INNER JOIN T_F_FILE_TYPE TF ON TT.FILE_TYPE_ID = TF.ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? AND TF.SIGNED <> ? AND T.BUSINESS_NO = ?) A WHERE DAYS > 0 AND ((CTRL_TYPE = ?) OR (FILE_STATUS = ? AND CTRL_TYPE = ?)), timer.file.lending.sql=SELECT T.BORROWER_EMAIL AS USER_CODE, T.BORROWER_NAME, T.BORROWER_EMAIL, DOC.NO, F.NO AS FILE_NO, (P.ID || '.' || P.NAME) AS TYPE_NAME, TO_CHAR(T.INSERT_TIME, 'YYYY-MM-DD'), TO_CHAR(T.EXPECTED_RETURN_DATE, 'YYYY-MM-DD') FROM T_F_FILE_LENDING T INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = T.ID INNER JOIN PRPDUSER U ON U.USERCODE = T.USER_ID INNER JOIN T_F_DOCUMENT_FILE DOF ON DOF.ID = D.DOCUMENT_FILE_ID INNER JOIN T_F_DOCUMENT DOC ON DOC.ID = DOF.DOCUMENT_ID INNER JOIN T_F_FILE F ON F.ID = DOF.FILE_ID INNER JOIN T_F_FILE_TYPE P ON P.ID = F.TYPE_ID WHERE D.STATUS IN (?) AND TRUNC(SYSDATE - T.EXPECTED_RETURN_DATE) = ?, sql.queryVehicle.proposal=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPTITEMCAR T LEFT JOIN PRPTITEMCAREXT C ON C.PROPOSALNO = T.PROPOSALNO AND C.ITEMNO = T.ITEMNO WHERE T.PROPOSALNO = ?, sql.file.core.audit=SELECT T.ID , T.NO , T.FILE_APPROVE_STATUS, T.APPLICANT  AS APPLICANT,   PU3.USERNAME AS SALESNAME,   PC.COMCNAME  AS COMCNAME,    T.AGENT_NAME AS AGENT_NAME,  PU1.USERNAME AS BUSINESSNAME,PU2.USERNAME AS USERNAME, (SELECT COUNT(*) FROM T_F_DOCUMENT_FILE TF	INNER JOIN T_F_FILE F ON TF.FILE_ID = F.ID    WHERE T.ID = TF.DOCUMENT_ID	AND F.FILE_APPROVE_STATUS IS NOT NULL AND (TF.STATUS = ? AND F.FILE_APPROVE_STATUS = ?)) AS UNAUDITED_COUNT FROM T_F_DOCUMENT T  LEFT JOIN PRPDCOMPANY PC ON T.BUSINESS_DEPT_ID = PC.COMCODE  LEFT JOIN PRPDUSER PU1 ON T.BUSINESS_USER_ID = PU1.USERCODE  LEFT JOIN PRPDUSER PU2 ON T.USER_ID = PU2.USERCODE           LEFT JOIN PRPDUSER PU3 ON T.SALES_ID = PU3.USERCODE			WHERE EXISTS (										SELECT 1 FROM T_F_DOCUMENT_FILE TF							INNER JOIN T_F_FILE TT ON TF.FILE_ID = TT.ID    WHERE T.ID = TF.DOCUMENT_ID	AND TT.FILE_APPROVE_STATUS IS NOT NULL AND ((TF.STATUS = ? AND TT.FILE_APPROVE_STATUS = ?) OR TT.FILE_APPROVE_STATUS IN (?, ?)) ), cq.import.dir=, timer.file.lending.days=0, mail.transport.protocol=smtp, mail.debug=true, sql.report.lack=SELECT ID, NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), DEPT_NAME, USER_NAME, BUSINESS_NO, APPLICANT, SALES_TIME, EFFECTIVE_TIME, LACKS, DAYS FROM ( SELECT T.*, (CASE WHEN XDAYS > 0 AND ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) THEN XDAYS ELSE 0 END) AS DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (D.COMCNAME) AS DEPT_NAME, (U.USERNAME) AS USER_NAME, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS XDAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN (?, ?) AND T.STATUS = ? ) T ) T, sql.queryClient.endor=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCPINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, timer.file.lending.template=timer.fileLending, mail.from=eFiling UAT<eFilingSystem@libertymutual.com.cn>, timer.file.lending.title=借阅档案到期提醒, timer.reminder.sql=SELECT BUSINESS_USER_ID, USER_NAME, USER_MAIL, NO, BUSINESS_NO, PRODUCT_NAME, NVL(LICENSE_NO, ENGINE_NO), APPLICANT, TO_CHAR(SALES_TIME, 'YYYY-MM-DD'), TO_CHAR(EFFECTIVE_TIME, 'YYYY-MM-DD'), LACKS, DAYS FROM ( SELECT T.*, P.NAME AS PRODUCT_NAME, (U.USERENAME || ' - ' || U.USERNAME) AS USER_NAME, U.EMAIL AS USER_MAIL, (CEIL(SYSDATE - T.SALES_TIME) - NVL(NVL(NVL(NVL(L.DAYS, L1.DAYS), L2.DAYS), L3.DAYS), ?)) AS DAYS, NVL(NVL(NVL(NVL(L.CTRL_TYPE, L1.CTRL_TYPE), L2.CTRL_TYPE), L3.CTRL_TYPE), '11') AS CTRL_TYPE FROM T_F_DOCUMENT T LEFT JOIN PRPDCOMPANY D ON D.COMCODE = T.BUSINESS_DEPT_ID LEFT JOIN PRPDUSER U ON U.USERCODE = T.BUSINESS_USER_ID LEFT JOIN T_F_PRODUCT P ON P.ID = T.PRODUCT_ID LEFT JOIN T_F_FILE_DEADLINE L ON L.STATUS = '1' AND L.PRODUCT_ID = T.PRODUCT_ID AND L.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L1 ON L1.STATUS = '1' AND L1.PRODUCT_ID IS NULL AND L1.FILE_DEPT_ID = T.BUSINESS_DEPT_ID LEFT JOIN T_F_FILE_DEADLINE L2 ON L2.STATUS = '1' AND L2.PRODUCT_ID = T.PRODUCT_ID AND L2.FILE_DEPT_ID IS NULL AND L2.COMPANY_ID = T.BUSINESS_COMPANY_ID LEFT JOIN T_F_FILE_DEADLINE L3 ON L3.STATUS = '1' AND L3.PRODUCT_ID IS NULL AND L3.FILE_DEPT_ID IS NULL AND L3.COMPANY_ID = T.BUSINESS_COMPANY_ID WHERE T.FILE_STATUS IN ('00', '01') AND T.STATUS = '1' ) T WHERE ((CTRL_TYPE = '11') OR (FILE_STATUS = '00' AND CTRL_TYPE = '00')) AND DAYS >= ? ORDER BY BUSINESS_USER_ID, DAYS, PROPOSAL_NO, POLICY_NO, NO, ???#=é?????????????????,?¤???????é????¨é????・??????é??, sql.queryClient.proposal.coverNote=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCCUSTOMER T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?, mail.smtp.host=10.132.1.168, sql.queryClient.proposal=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPTINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.PROPOSALNO = ? AND T.INSUREDFLAG = ?, sql.fileLending.query=SELECT T.ID, T.NO, T.TYPE, FD.BORROWER_NAME, FD.INSERT_TIME, FD.EXPECTED_RETURN_DATE, T.FILE_STATUS, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE1, TRUNC(SYSDATE - FD.EXPECTED_RETURN_DATE) AS RETURN_DATE2, U.USERNAME, T.LENT, FD.ID AS LENDING_ID FROM T_F_DOCUMENT T LEFT JOIN ( SELECT DISTINCT F.DOCUMENT_ID, L.* FROM T_F_FILE_LENDING L INNER JOIN T_F_FILE_LENDING_DETAIL D ON D.LENDING_ID = L.ID INNER JOIN T_F_DOCUMENT_FILE F ON F.FILE_ID = D.FILE_ID WHERE L.STATUS IN ('1', '2') ) FD ON FD.DOCUMENT_ID = T.ID LEFT JOIN PRPDUSER U ON U.USERCODE = FD.USER_ID, sql.queryCarOwner.endor=SELECT DECODE(C.CARINSUREDRELATION, '3', '1', '2') AS INSUREDTYPE, NULL AS CAROWNERCODE, T.IDENTIFYTYPE, T.CERTIFICATENO, '3' AS CAROWNERFLAG, NULL AS INVALIDDATE FROM PRPCPCAROWNER T INNER JOIN PRPCPITEMCAR C ON C.POLICYNO = T.POLICYNO WHERE T.POLICYNO = ?, mail.user=eFilingSystemTest, sql.queryVehicle.endor=SELECT T.USENATURECODE, C.VEHICLECATEGORYCODE, T.ENROLLDATE, T.VINNO, T.ENGINENO FROM PRPCPITEMCAR T LEFT JOIN PRPPITEMCAREXT C ON C.ENDORSENO = T.ENDORSENO AND C.ITEMNO = T.ITEMNO WHERE T.POLICYNO = ?, timer.document.complement.sql=SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE EXISTS (SELECT ID FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.PROPOSAL_NO = C.PROPOSALNO) UNION ALL SELECT POLICYNO, ? AS TYPE FROM PRPCMAIN C WHERE C.OPERATEDATE >= ? AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.PROPOSAL_NO = C.PROPOSALNO AND D.TYPE IN (?, ?)) UNION ALL SELECT POLICYNO, ? FROM PRPCMAINCOVERNOTE C WHERE ( (OPERATEDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.POLICY_NO = C.POLICYNO) ) OR (OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT POLICY_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.POLICY_NO = C.POLICYNO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEAD C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT ENDORSENO, ? FROM PRPPHEADCOVERNOTE C WHERE ( (INPUTDATE >= ? AND UNDERWRITEFLAG IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.STATUS = ? AND D.NO = C.ENDORSENO)) OR (INPUTDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT ENDOR_NO FROM T_F_DOCUMENT D WHERE D.TYPE = ? AND D.NO = C.ENDORSENO) ) ) UNION ALL SELECT PROPOSALNO, ? FROM PRPTMAIN C WHERE OPERATEDATE >= ? AND UNDERWRITEFLAG NOT IN ('1', '3') AND NOT EXISTS (SELECT PROPOSAL_NO FROM T_F_DOCUMENT D WHERE D.TYPE IN (?, ?) AND D.PROPOSAL_NO = C.PROPOSALNO) , sql.queryClient.policy=SELECT T.INSUREDTYPE, T.INSUREDCODE, T.IDENTIFYTYPE, T.IDENTIFYNUMBER, T.INSUREDFLAG, NVL(C.IDINVALIDDATE, U.ORGINVALIDDATE) FROM PRPCINSURED T LEFT JOIN PRPDCUSTOMERIDV C ON C.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '1' LEFT JOIN PRPDCUSTOMERUNIT U ON U.CUSTOMERCODE = T.INSUREDCODE AND T.INSUREDTYPE = '2' WHERE T.POLICYNO = ? AND T.INSUREDFLAG = ?}
[DEBUG][2017-11-22 21:20:54,107] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 21:20:54,117] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 21:20:54,143] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:125)
	切换邮件配置:{mail.password=, mail.user=ARAP System, mail.smtp.host=10.132.1.168}
[DEBUG][2017-11-22 21:20:54,143] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:151)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
[DEBUG][2017-11-22 21:20:54,144] com.sinosoft.efiling.mail.MailHelper.setProperties(MailHelper.java:161)
	from=eFiling UAT <eFilingSystem@libertymutual.com.cn>
